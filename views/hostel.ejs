<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <title><%=hosteldata.hostel_name %> | Hostel Dekho</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
   
  </head>
  <body>
    <%- include('partials/navbar') %>
    <main class="page-shell">
     
      
      <% if (typeof isTrending !== 'undefined' && isTrending) { %>

          <div class="card">
          <i class="bi bi-fire"></i> <b>MOST VIEWED HOSTEL!</b>
        </div>
       

      <% } %>
      <div class="card">
        <div class="card-header" style="margin-bottom: 16px;">
          <div>
            <p class="card-description" style="margin: 0;"><a href="/">Home</a> / <%= hosteldata.hostel_name %></p>
          </div>
        </div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 20px;">
          <span class="chip"><%= hosteldata.hostel_type %></span>
          <span class="chip"><%= hosteldata.bed_availability %></span>
          <span class="chip"><%= hosteldata.bed_type %></span>
        </div>
        
      <table class="table-subtle" style="margin-top: 8px;">
  <thead>
  <tr>
    <th style="padding: 14px;"><b>Mess Caterer</b></th>
    <th style="padding: 14px;"><b>Mess Floors</b></th>
    <th style="padding: 14px;"><b>Badminton Court</b></th>
    <th style="padding: 14px;"><b>Chota Dhobi Facility</b></th>
  </tr>
  </thead>
  <tbody>
  <tr>
    <td style="padding: 14px;"><%= hosteldata.mess_caterer %></td>
    <td style="padding: 14px;">
      <div style="display: flex; flex-direction: column; gap: 8px;">
        <div><strong>VEG MESS:</strong> <%= hosteldata.veg_mess_floor %></div>
        <div><strong>NON VEG MESS:</strong> <%= hosteldata.non_veg_mess_floor %></div>
        <div><strong>SPECIAL MESS:</strong> <%= hosteldata.special_mess_floor %></div>
      </div>
    </td>
    <td style="padding: 14px;"><%= hosteldata.badminton_court %></td>
    <td style="padding: 14px;"><%= hosteldata.chota_dhobi_facility %></td>
  </tr>
  </tbody>
</table>
      </div>

      <div class="card">
          <div class="card-header">
            <p class="card-title" style="margin:0;">Floor Plans</p>
            <p class="muted">(Click to View Rooms)</p>
          </div>
          <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 16px;">
          <% if(floorplan && floorplan.length > 0){ %>
              <% floorplan.forEach(function(floor){ %>
              <span class="chip"><a href="/floor/<%=floor.id%>"><%=floor.floor %></a></span>
              <% }); %>
          <% } else { %>
            <p class="muted">No Floor Plans available!</p>
          <% } %>
          </div>
      </div>


      <div class="card">
          <div class="card-header" style="margin-bottom: 16px;">
            <p class="card-title" style="margin:0;">Pricing</p>
          </div>
          <% if(roomdetails && roomdetails.length > 0){ %>
              <% roomdetails.forEach(function(roomdetails){ %>
<table  class="subtle">
  <tr>
    <td colspan="3">
<center><b><%=roomdetails.room_type %></b></center>
    </td>
    <td>
      <span class="chip" onclick="showRoomImage('<%=roomdetails.image %>')">VIEW ROOM <i class="bi bi-box-arrow-up-right"></i></span>
    </td>
  </tr>

  <tr>
    <td>

    </td>
   
  <td>
    <b>Veg Mess</b>
  </td>
  <td>
     <b>Non Veg Mess</b>
  </td>
  <td>
     <b>Special Mess</b>
  </td>
</tr>
<tr>
   <td>
      <b>Price in Rupees (Hostel & Mess - <u>For Indian Students</u>)</b>
    </td>
  <td>
    <%=roomdetails.price_veg %>
  </td>
    <td>
    <%=roomdetails.price_non_veg %>
  </td>
    <td>
    <%=roomdetails.price_special %>
  </td>
</tr>

<tr>
   <td>
      <b>Price in Dollars (Hostel & Mess - <u>For NRI Students</u>)</b>
    </td>
  <td>
    <%=roomdetails.price_veg_nri %>
  </td>
    <td>
    <%=roomdetails.price_non_veg_nri %>
  </td>
    <td>
    <%=roomdetails.price_special_nri %>
  </td>
</tr>


</table>
              <% }); %>
          <% } else { %>
            <p class="muted">No Room Details available!</p>
          <% } %>
      </div>



      <!-- <div class="card">
          <div class="card-header">
            <p class="card-title" style="margin:0;">Similar Hostels</p>
          </div>
          <% if(similarhostels && similarhostels.length > 0){ %>
              <% similarhostels.forEach(function(similarhostels){ %>

                <div class="card">

                  <span class="chip"><a href="/hostel/<%=similarhostels.hostel_id%>"><%= similarhostels.hostel_name %></a></span>
                
               
                  <% if(similarhostels.price_veg < hosteldata.price_veg) { %>
                     <span class="chip">  Cheaper Veg Mess <i class="bi bi-arrow-down-circle-fill"></i></span>

                   <% } %> 
                   <% if(similarhostels.price_non_veg < hosteldata.price_non_veg) { %>
                      <span class="chip"> Cheaper Non Veg Mess <i class="bi bi-arrow-down-circle-fill"></i> </span>

                   <% } %> 
                   <% if(similarhostels.price_special < hosteldata.price_special) { %>
                      <span class="chip">  Cheaper Special Mess <i class="bi bi-arrow-down-circle-fill"></i> </span>

                   <% } %> 


                   <% if(similarhostels.price_special_nri < hosteldata.price_special_nri) { %>
                      <span class="chip">  Cheaper Special Mess (For NRI Students) <i class="bi bi-arrow-down-circle-fill"></i> </span>

                   <% } %> 
                

                </div>
               

              <% }); %>
          <% } else { %>
            <p class="muted">No Similar Hostels available!</p>
          <% } %>
      </div> -->



      
               
              




    </main>
    <script>
      (function(){
        function initAccordion(){
          const headers = document.querySelectorAll('.accordion-header');
          headers.forEach(header => {
            const targetId = header.dataset.target;
            const panel = document.getElementById(targetId);
            header.setAttribute('role', 'button');
            header.setAttribute('aria-expanded', 'false');
            if(panel) panel.setAttribute('aria-hidden', 'true');

            header.addEventListener('click', () => toggle(header, panel));
            header.addEventListener('keydown', (e) => {
              if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(header, panel); }
            });
          });
        }

        function toggle(header, panel){
          const item = header.closest('.accordion-item');
          const willOpen = !item.classList.contains('open');
          item.classList.toggle('open', willOpen);
          header.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
          if(panel){
            panel.classList.toggle('open', willOpen);
            panel.setAttribute('aria-hidden', willOpen ? 'false' : 'true');
            if(willOpen){
              const imgs = panel.querySelectorAll('img[data-src].lazy-floor');
              imgs.forEach(img => { if(!img.src) img.src = img.dataset.src; });
              const focusable = panel.querySelector('a, button, input, [tabindex]');
              if(focusable) focusable.focus();
            }
          }
        }

        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initAccordion);
        else initAccordion();
      })();
    </script>
    <script>
      function showRoomImage(imageUrl) {
        Swal.fire({
          imageUrl: imageUrl,
          imageWidth: 600,
          imageHeight: 'auto',
          imageAlt: 'Room Image',
          confirmButtonText: 'Close',
          confirmButtonColor: '#22c55e'
        });
      }
    </script>
    <%- include('partials/footer') %>
  </body>
</html>
