<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />

    <title>Hostel Dekho</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
    <style>
      /* Accordion styles for floor plans */
      .accordion-item { border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
      .accordion-header { display:flex; align-items:center; justify-content:space-between; gap:12px; padding:12px 16px; cursor:pointer; background: rgba(255,255,255,0.01); }
      .accordion-header:focus { outline: 2px solid rgba(34,197,94,0.12); }
      .accordion-header .card-title { margin:0; font-weight:600; }
      .accordion-chev { transition: transform .2s ease; color: var(--text-dim); }
      .accordion-item.open .accordion-chev { transform: rotate(90deg); color: var(--accent); }
      .accordion-panel { display:none; padding:16px; background: linear-gradient(145deg, #0f121a, #0f1318); }
      .accordion-panel.open { display:block; }
      .accordion-panel img { width:100%; border-radius:10px; border:1px solid rgba(255,255,255,0.02); }
      .accordion-actions { margin-top:12px; display:flex; gap:12px; }
    </style>
  </head>
  <body>
    <%- include('partials/navbar') %>
    <main class="page-shell">
      <div class="card">
        <div class="card-header">
          <div>
            <p class="card-description"><a href="/">Home</a> / <%= hosteldata.hostel_name %></p>
          </div>
          <span class="chip"><%= hosteldata.hostel_type %></span>
          <span class="chip"><%= hosteldata.bed_availability %></span>
          <span class="chip"><%= hosteldata.bed_type %></span>

        </div>
        <hr>
      <table class="table-subtle">
  <tr>
    <td><b>Mess Caterer</b></td>
    <td colspan="3"><b>Mess Floors</b></td>
    <td><b>Badminton Court</b></td>
    <td><b>Chota Dhobi Facility</b></td>

  </tr>
  <tr>
<td><%= hosteldata.mess_caterer %></td>
<td>VEG MESS:<br><%= hosteldata.veg_mess_floor %></td>

<td>NON VEG MESS:<br><%= hosteldata.non_veg_mess_floor %></td>

<td>SPECIAL MESS:<br><%= hosteldata.special_mess_floor %></td>
<td><%= hosteldata.badminton_court %></td>
<td><%= hosteldata.chota_dhobi_facility %></td>


  </tr>
</table>
      </div>

      <div class="card">
          <div class="card-header">
            <p class="card-title" style="margin:0;">Floor Plans</p>
            <p class="muted">(Click on a specific floor to view floor plan)</p>
          </div>
          <% if(floorplan && floorplan.length > 0){ %>
              <% floorplan.forEach(function(floor){ %>
              <span class="chip"><a href="<%=floor.link%>">Floor: <%=floor.floor %></a></span>

              <% }); %>
          <% } else { %>
            <p class="muted">No Floor Plans available!</p>
          <% } %>
      </div>


      <div class="card">
          <div class="card-header">
            <p class="card-title" style="margin:0;">Reviews</p>
            <p class="muted"><a href="">SUBMIT REVIEW</a></p>
          </div>
            <% if(reviews && reviews.length > 0){ %>
              <% reviews.forEach(function(reviews){ %>
                
                  <div class="card">
                    <div class="card-header">
                      <% if(reviews.jio_speed === 'Poor' || reviews.jio_speed==='Very Poor') { %>
                      <span class="chip-no">Jio Connection : <%=reviews.jio_speed %></span>

                        <% } else if(reviews.jio_speed === 'Good') { %>
                      <span class="chip-mid">Jio Connection : <%=reviews.jio_speed %></span>

                          <% } else { %>
                      <span class="chip">Jio Connection : <%=reviews.jio_speed %></span>

                          <% } %>



                          <% if(reviews.airtel_speed === 'Poor' || reviews.airtel_speed==='Very Poor') { %>
                      <span class="chip-no">Airtel Connection : <%=reviews.airtel_speed %></span>

                        <% } else if(reviews.airtel_speed === 'Good') { %>
                      <span class="chip-mid">Airtel Connection : <%=reviews.airtel_speed %></span>

                          <% } else { %>
                      <span class="chip">Airtel Connection : <%=reviews.airtel_speed %></span>

                          <% } %>



                          <% if(reviews.vit_wifi_speed === 'Poor' || reviews.vit_wifi_speed==='Very Poor') { %>
                      <span class="chip-no">VIT Wifi Connection : <%=reviews.vit_wifi_speed %></span>

                        <% } else if(reviews.vit_wifi_speed === 'Good') { %>
                      <span class="chip-mid">VIT Wifi Connection : <%=reviews.vit_wifi_speed %></span>

                          <% } else { %>
                      <span class="chip">VIT Wifi Connection : <%=reviews.vit_wifi_speed %></span>

                          <% } %>


                           <% if(reviews.cleaniless_score <= 2) { %>
                      <span class="chip-no">Cleanliness : <%=reviews.cleaniless_score %></span>

                        <% } else if(reviews.cleaniless_score == 3) { %>
                      <span class="chip-mid">Cleanliness : <%=reviews.cleaniless_score %></span>

                          <% } else { %>
                      <span class="chip">Cleanliness : <%=reviews.cleaniless_score %></span>

                          <% } %>





                    </div>
                    <%=reviews.remarks %>
                  </div>

              <% }); %>
          <% } else { %>
            <p class="muted">No Floor Plans available!</p>
          <% } %>
                  </div>
               
              




    </main>
    <script>
      (function(){
        function initAccordion(){
          const headers = document.querySelectorAll('.accordion-header');
          headers.forEach(header => {
            const targetId = header.dataset.target;
            const panel = document.getElementById(targetId);
            header.setAttribute('role', 'button');
            header.setAttribute('aria-expanded', 'false');
            if(panel) panel.setAttribute('aria-hidden', 'true');

            header.addEventListener('click', () => toggle(header, panel));
            header.addEventListener('keydown', (e) => {
              if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(header, panel); }
            });
          });
        }

        function toggle(header, panel){
          const item = header.closest('.accordion-item');
          const willOpen = !item.classList.contains('open');
          item.classList.toggle('open', willOpen);
          header.setAttribute('aria-expanded', willOpen ? 'true' : 'false');
          if(panel){
            panel.classList.toggle('open', willOpen);
            panel.setAttribute('aria-hidden', willOpen ? 'false' : 'true');
            if(willOpen){
              const imgs = panel.querySelectorAll('img[data-src].lazy-floor');
              imgs.forEach(img => { if(!img.src) img.src = img.dataset.src; });
              const focusable = panel.querySelector('a, button, input, [tabindex]');
              if(focusable) focusable.focus();
            }
          }
        }

        if (document.readyState === 'loading') document.addEventListener('DOMContentLoaded', initAccordion);
        else initAccordion();
      })();
    </script>
    <%- include('partials/footer') %>
  </body>
</html>
