<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
    <title>Hostel Dekho</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css"
    />
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5MFTR651RJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5MFTR651RJ');
</script>
  </head>
  <body>
    <%- include('partials/navbar') %>
    <main class="page-shell">
      
      <!-- Search Bar at Top -->
      <div class="search-bar-container">
        <div class="search-bar-wrapper">
          <i class="bi bi-search search-icon"></i>
          <input 
            type="text" 
            id="searchInput" 
            class="search-input" 
            placeholder="Search by Hostel Name..."
          />
        </div>
      </div>

      <!-- Layout Container with Sidebar and Content -->
      <div class="layout-with-sidebar">
        
        <!-- Left Sidebar with Filters -->
        <aside class="filter-sidebar">
          <div class="sidebar-header">
            <div style="display: flex; align-items: center; gap: 8px;">
              <i class="bi bi-funnel" style="color: var(--text);"></i>
              <h3 class="sidebar-title">Filters</h3>
            </div>
            <button id="clearFilters" class="btn-reset">
              Reset Filters
            </button>
          </div>

          <!-- Gender Filter -->
          <div class="filter-group">
            <h4 class="filter-label">Gender</h4>
            <div class="chip-group">
              <button class="filter-chip" data-filter="gender" data-value="MENS">Mens</button>
              <button class="filter-chip" data-filter="gender" data-value="LADIES">Ladies</button>
            </div>
          </div>

          <!-- Hostel Type Filter -->
          <div class="filter-group">
            <h4 class="filter-label">Hostel Type</h4>
            <div class="chip-group">
              <button class="filter-chip" data-filter="hostelType" data-value="AC">AC</button>
              <button class="filter-chip" data-filter="hostelType" data-value="NON AC">Non-AC</button>
            </div>
          </div>

          <!-- Bed Type Filter -->
          <div class="filter-group">
            <h4 class="filter-label">Bed Type</h4>
            <div class="chip-group">
              <button class="filter-chip" data-filter="bedType" data-value="BUNKER">Bunker</button>
              <button class="filter-chip" data-filter="bedType" data-value="NON-BUNKER">Non-Bunker</button>
            </div>
          </div>

          <!-- Chota Dhobi Filter -->
          <div class="filter-group">
            <h4 class="filter-label">Chota Dhobi</h4>
            <div class="chip-group">
              <button class="filter-chip" data-filter="dhobi" data-value="Yes">Available</button>
              <button class="filter-chip" data-filter="dhobi" data-value="No">Not Available</button>
            </div>
          </div>

          <!-- Beds Available Filter -->
          <div class="filter-group">
            <h4 class="filter-label">Beds Available</h4>
            <div class="chip-group">
              <button class="filter-chip" data-filter="bedAvailability" data-value="2 BED">2</button>
              <button class="filter-chip" data-filter="bedAvailability" data-value="3 BED">3</button>
              <button class="filter-chip" data-filter="bedAvailability" data-value="4 BED">4</button>
              
              <button class="filter-chip" data-filter="bedAvailability" data-value="6 BED">6</button>
                            <button class="filter-chip" data-filter="bedAvailability" data-value="8 BED">8</button>

            </div>
          </div>
        </aside>

        <!-- Main Content Area -->
        <div class="main-content">
          <div id="resultsCount" style="color: var(--text-dim); margin-bottom: 12px; font-weight: 500;"></div>
          
          <div id="hostelList">
      <% if(hosteldata && hosteldata.length>0){ %>
        <% hosteldata.forEach(function(hostel) { %>
        <a href="/hostel/<%= hostel.hostel_id %>" class="card-link" style="text-decoration: none;">
          <div class="card">
            <div class="card-header" style="border-bottom: 1px solid var(--border); padding-bottom: 16px; margin-bottom: 20px;">
                         <h3 style="font-size: 1.4rem; font-weight: 600; margin: 0 0 20px 0; line-height: 1.3;"><%= hostel.hostel_name %></h3>

            </div>
            <div class="card-content">
              <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <% if(hostel.gender==="MENS") { %>
                  <span class="chip-blue"><%= hostel.gender %></span>
                <% } else { %>
                  <span class="chip-ladies"><%= hostel.gender %></span>
                <% } %>
                <span class="chip"><%= hostel.bed_availability %></span>
                <span class="chip"><%= hostel.hostel_type %></span>
                <span class="chip"><%= hostel.bed_type %></span>
                <% if(hostel.chota_dhobi_facility && hostel.chota_dhobi_facility.length>0 ) { %>
                <span class="chip">IN BLOCK CHOTA DHOBI</span>
                
                <% } %>
                                <span class="chip" data-dhobi="<%= hostel.chota_dhobi_facility %>" style="display: none;"></span>

              </div>
            </div>
          </div>
        </a>
        <% }); %>
     
      <% } else {  %>
<h1>Coming Soon! <i class="bi bi-emoji-heart-eyes-fill"></i></h1>
        <% } %>
          </div>
        </div>
      </div>
    </main>

    <%- include('partials/footer') %>
    <script src="/script.js"></script>
  </body>
</html>
