<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <title>Floor: <%=floorplan.floor%> | <%=hostel.hostel_name %> | HostelDekho</title>
  
  </head>
  <body>
    <%- include('partials/navbar') %>
    <main class="page-shell">
    
      <div class="card">
        <div class="card-header">
          <p class="card-title" style="margin:0;"><%=hostel.hostel_name %></p>
          <span class="chip">Floor: <%=floorplan.floor%></span>
        </div>
        <div class="card-content" style="align-items:center;">
          <% if(floorplan.link && floorplan.link.length>0) { %>
          
                    <img src="<%= floorplan.link %>" style="max-width: 500px; width:100%;" class="img-fluid" />

          <% } else { %>

            <h4>Coming Soon!</h4>

            <% } %>


        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <p class="card-title" style="margin:0;">Rooms</p>
                      <p class="muted"><a href="/review/<%=floorplan.id%>"><i class="bi bi-plus-square-dotted"></i>&nbsp; ADD YOUR ROOM</a></p>

        </div>
        <% if(roomdata && roomdata.length > 0){ %>
            <% roomdata.forEach(function(room){ %>
              <div class="card">
                                <div class="card-header">

                <div class=card-title><%= room.room_number %></div>
</div>
                 <% if(room.jio_speed === 'Poor' || room.jio_speed==='Very Poor') { %>
                      <span class="chip-no">Jio Connection : <%=room.jio_speed %></span>

                        <% } else if(room.jio_speed === 'Good') { %>
                      <span class="chip-mid">Jio Connection : <%=room.jio_speed %></span>

                          <% } else { %>
                      <span class="chip">Jio Connection : <%=room.jio_speed %></span>

                          <% } %>


                          <% if(room.airtel_speed === 'Poor' || room.airtel_speed==='Very Poor') { %>
                      <span class="chip-no">Airtel Connection : <%=room.airtel_speed %></span>

                        <% } else if(room.airtel_speed === 'Good') { %>
                      <span class="chip-mid">Airtel Connection : <%=room.airtel_speed %></span>

                          <% } else { %>
                      <span class="chip">Airtel Connection : <%=room.airtel_speed %></span>

                          <% } %>

                          <% if(room.vit_wifi_speed === 'Poor' || room.vit_wifi_speed==='Very Poor') { %>
                      <span class="chip-no">VIT Wifi Connection : <%=room.vit_wifi_speed %></span>

                        <% } else if(room.vit_wifi_speed === 'Good') { %>
                      <span class="chip-mid">VIT Wifi Connection : <%=room.vit_wifi_speed %></span>

                          <% } else { %>
                      <span class="chip">VIT Wifi Connection : <%=room.vit_wifi_speed %></span>

                          <% } %>
<% if(room.remarks && room.remarks.length>0) { %>

  <span class="chip-blue">Remarks : <%=room.remarks %></span>


<% } %>

</div>

            <% }); %>
        <% } else { %>
          <p class="muted">No Rooms available!</p>
        <% } %>
      </div>
    </main>
    <%- include('partials/footer') %>
  </body>
  <script src="/script.js"></script>
  <script>
    // Check for success message in URL
    const urlParams = new URLSearchParams(window.location.search);
    const message = urlParams.get('message');
    const error = urlParams.get('error');
    
    if (message) {
      Swal.fire({
        icon: 'success',
        title: 'Success!',
        text: decodeURIComponent(message),
        confirmButtonColor: '#22c55e'
      });
      // Clean up URL by removing the query parameter
      window.history.replaceState({}, document.title, window.location.pathname);
    }
    
    if (error) {
      Swal.fire({
        icon: 'error',
        title: 'Error!',
        text: decodeURIComponent(error),
        confirmButtonColor: '#ef4444'
      });
      // Clean up URL by removing the query parameter
      window.history.replaceState({}, document.title, window.location.pathname);
    }
  </script>
</html>
