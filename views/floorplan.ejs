<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="shortcut icon" href="/favicon.png" type="image/x-icon" />
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <title>Floor: <%=floorplan.floor%> | <%=hostel.hostel_name %> | HostelDekho</title>
    <style>
      /* Trending banner styles */
      .trending-banner {
        background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
        color: white;
        padding: 16px 24px;
        border-radius: 12px;
        margin: 20px 0;
        display: flex;
        align-items: center;
        gap: 12px;
        font-weight: 600;
        box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
        animation: pulse 2s ease-in-out infinite;
      }
      .trending-icon {
        font-size: 24px;
        animation: bounce 1s ease-in-out infinite;
      }
      @keyframes pulse {
        0%, 100% { box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3); }
        50% { box-shadow: 0 4px 20px rgba(34, 197, 94, 0.5); }
      }
      @keyframes bounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-5px); }
      }
    </style>
  </head>
  <body>
    <%- include('partials/navbar') %>
    <main class="page-shell">
      
      <% if (typeof isTrending !== 'undefined' && isTrending) { %>
      <div class="trending-banner">
        <span class="trending-icon">ðŸ”¥</span>
        <span>This Floor is being viewed the most right now!</span>
      </div>
      <% } %>
      <div class="card">
        <div class="card-header">
          <p class="card-title" style="margin:0;"><%=hostel.hostel_name %></p>
          <span class="chip">Floor: <%=floorplan.floor%></span>
        </div>
        <div class="card-content" style="align-items:center;">
          <img src="<%= floorplan.link %>" style="max-width: 420px; width:100%;" class="img-fluid" />
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <p class="card-title" style="margin:0;">Rooms</p>
                      <p class="muted"><a href="/review/<%=floorplan.id%>"><i class="bi bi-plus-square-dotted"></i>&nbsp; ADD YOUR ROOM</a></p>

        </div>
        <% if(roomdata && roomdata.length > 0){ %>
            <% roomdata.forEach(function(room){ %>
              <div class="card">
                                <div class="card-header">

                <div class=card-title><%= room.room_number %></div>
</div>
                 <% if(room.jio_speed === 'Poor' || room.jio_speed==='Very Poor') { %>
                      <span class="chip-no"><img src="Jio Connection : <%=room.jio_speed %></span>

                        <% } else if(room.jio_speed === 'Good') { %>
                      <span class="chip-mid">Jio Connection : <%=room.jio_speed %></span>

                          <% } else { %>
                      <span class="chip">Jio Connection : <%=room.jio_speed %></span>

                          <% } %>


                          <% if(room.airtel_speed === 'Poor' || room.airtel_speed==='Very Poor') { %>
                      <span class="chip-no">Airtel Connection : <%=room.airtel_speed %></span>

                        <% } else if(room.airtel_speed === 'Good') { %>
                      <span class="chip-mid">Airtel Connection : <%=room.airtel_speed %></span>

                          <% } else { %>
                      <span class="chip">Airtel Connection : <%=room.airtel_speed %></span>

                          <% } %>

                          <% if(room.vit_wifi_speed === 'Poor' || room.vit_wifi_speed==='Very Poor') { %>
                      <span class="chip-no">VIT Wifi Connection : <%=room.vit_wifi_speed %></span>

                        <% } else if(room.vit_wifi_speed === 'Good') { %>
                      <span class="chip-mid">VIT Wifi Connection : <%=room.vit_wifi_speed %></span>

                          <% } else { %>
                      <span class="chip">VIT Wifi Connection : <%=room.vit_wifi_speed %></span>

                          <% } %>
</div>

            <% }); %>
        <% } else { %>
          <p class="muted">No Rooms available!</p>
        <% } %>
      </div>
    </main>
    <%- include('partials/footer') %>
  </body>
  <script src="/script.js"></script>
  <script>
    // Check for success message in URL
    const urlParams = new URLSearchParams(window.location.search);
    const message = urlParams.get('message');
    if (message) {
      Swal.fire({
        icon: 'success',
        title: 'Success!',
        text: decodeURIComponent(message),
        confirmButtonColor: '#22c55e'
      });
      // Clean up URL by removing the query parameter
      window.history.replaceState({}, document.title, window.location.pathname);
    }
  </script>
</html>
